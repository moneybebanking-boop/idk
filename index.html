<!DOCTYPE html>
<html>
<head>
  <title>Goblin Sword Fight</title>
  <style>
    body {
      margin: 0;
      background: #222;
      overflow: hidden;
      font-family: Arial;
      color: white;
      text-align: center;
    }

    canvas {
      background: #3a7d44;
      display: block;
      margin: auto;
      border: 4px solid black;
    }

    #ui {
      padding: 10px;
      font-size: 20px;
    }
  </style>
</head>
<body>

<div id="ui">
  ‚ù§Ô∏è Player HP: <span id="playerHP">100</span> |
  üëπ Goblin HP: <span id="goblinHP">50</span>
  <br>
  Controls: WASD = Move | SPACE = Attack
</div>

<canvas id="gameCanvas" width="800" height="500"></canvas>

<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  const playerHPText = document.getElementById("playerHP");
  const goblinHPText = document.getElementById("goblinHP");

  let keys = {};

  const player = {
    x: 100,
    y: 250,
    size: 40,
    speed: 4,
    hp: 100,
    attacking: false,
    attackCooldown: 0
  };

  const goblin = {
    x: 600,
    y: 250,
    size: 35,
    speed: 2,
    hp: 50,
    alive: true,
    hitCooldown: 0
  };

  let message = "";

  document.addEventListener("keydown", (e) => {
    keys[e.code] = true;
  });

  document.addEventListener("keyup", (e) => {
    keys[e.code] = false;
  });

  function distance(a, b) {
    return Math.sqrt((a.x - b.x) ** 2 + (a.y - b.y) ** 2);
  }

  function attack() {
    if (player.attackCooldown <= 0) {
      player.attacking = true;
      player.attackCooldown = 30;

      if (distance(player, goblin) < 70 && goblin.alive) {
        goblin.hp -= 10;
        message = "üí• You hit the goblin!";

        if (goblin.hp <= 0) {
          goblin.hp = 0;
          goblin.alive = false;
          message = "üèÜ You defeated the goblin!";
        }
      } else {
        message = "‚öîÔ∏è You swung and missed!";
      }
    }
  }

  function update() {
    // Player movement
    if (keys["KeyW"]) player.y -= player.speed;
    if (keys["KeyS"]) player.y += player.speed;
    if (keys["KeyA"]) player.x -= player.speed;
    if (keys["KeyD"]) player.x += player.speed;

    // Keep player in bounds
    player.x = Math.max(0, Math.min(canvas.width - player.size, player.x));
    player.y = Math.max(0, Math.min(canvas.height - player.size, player.y));

    // Attack
    if (keys["Space"]) attack();

    // Cooldowns
    if (player.attackCooldown > 0) player.attackCooldown--;
    if (goblin.hitCooldown > 0) goblin.hitCooldown--;

    if (player.attackCooldown < 20) player.attacking = false;

    // Goblin AI movement
    if (goblin.alive) {
      if (goblin.x < player.x) goblin.x += goblin.speed;
      if (goblin.x > player.x) goblin.x -= goblin.speed;
      if (goblin.y < player.y) goblin.y += goblin.speed;
      if (goblin.y > player.y) goblin.y -= goblin.speed;

      // Goblin attacks player
      if (distance(player, goblin) < 55 && goblin.hitCooldown <= 0) {
        player.hp -= 5;
        goblin.hitCooldown = 40;
        message = "üëπ Goblin hit you!";

        if (player.hp <= 0) {
          player.hp = 0;
          message = "üíÄ You got defeated!";
        }
      }
    }

    // Update UI
    playerHPText.textContent = player.hp;
    goblinHPText.textContent = goblin.hp;
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Player
    ctx.fillStyle = "blue";
    ctx.fillRect(player.x, player.y, player.size, player.size);

    // Sword attack effect
    if (player.attacking) {
      ctx.fillStyle = "silver";
      ctx.fillRect(player.x + player.size, player.y + 10, 30, 10);
    }

    // Goblin
    if (goblin.alive) {
      ctx.fillStyle = "darkgreen";
      ctx.fillRect(goblin.x, goblin.y, goblin.size, goblin.size);
    } else {
      ctx.fillStyle = "red";
      ctx.font = "30px Arial";
      ctx.fillText("‚ò†Ô∏è", goblin.x, goblin.y);
    }

    // Message
    ctx.fillStyle = "white";
    ctx.font = "20px Arial";
    ctx.fillText(message, 20, 30);

    // Game over text
    if (player.hp <= 0) {
      ctx.fillStyle = "black";
      ctx.font = "50px Arial";
      ctx.fillText("GAME OVER", 260, 250);
    }
  }

  function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
  }

  gameLoop();
</script>

</body>
</html>
